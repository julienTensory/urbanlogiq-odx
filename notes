# Issues
Floating point errors
-> Need to use doubles explicitly

Why adjust when max alighting prob is 0? Can probably remove this
Handle cases where alighting probability is null because there is no preceding row. Note this might be because there are no alighting locations that satisfy the travel time conditions?
Investigate null STOP_ALIGHTING_PROBABILITY
Issue when comparing per trip alighting probability to overall. Will need to adjust somehow.


# Debug card ids
2aab14db-46fe-797a-fdb3-61ec74610c27
43ec4aab-6737-1096-f808-4b466050ab4d
4ff7679a-34c5-b9a3-8266-7ebd8db26b59
5ef75b4e-b574-338a-3a4b-66b9bb31fa3a
9cfcf7ec-1589-d4d8-e179-b8ccb34e3cc2
c95e35d1-1662-0239-7c16-0d44e68dd7e5
e7854e5b-c2cc-c5c8-96c6-5daed19620bb


# odd trips
4ff7679a-34c5-b9a3-8266-7ebd8db26b59/2024-04-04T06:58:06.000Z -> why don't we board the red line?
2aab14db-46fe-797a-fdb3-61ec74610c27/2024-04-03T07:42:54.000Z -> example of short trip


# Diagnosis
When additional routes a provided as options at alternate boarding locations, the viability of the alighting locations along these routes aren't compared across all possible route/alighting pairs. Thus, a totally unviable route will still give alighting locations that have high probabilities because they are only compare to alighting locations on the same route.

# Fixes
We need to modify the code in such a way as to compare all route/alighting pairs to each other.

One way could be to replace the min/max travel times with those found across all possible alighting locations, regardless of the route. This creates an issue with the alighting probability, though, which is based on a series of decisions where the rider has sequentially decided not to alight at all previous locations. This equation is based on the assumption that a rider must alight once they have boarded a route.

Another way would be to intruduce a modifier on the alighting probability that measures the overall viability of a route. So the overall confidence would be `(alighting_probability)*(boarding_probability)*(route_selection_probability)`
Route selection is based on the route utility, perhaps the minimum travel time offered by any of the alighting locations in the trip_id.

Ask Irene and co how direction ID is used in the data pipelines